# Theme Distribution & Publishing

Cartino's theme system, inspired by **Statamic CMS**, allows developers to create beautiful, exportable storefronts that merchants can install and customize. Themes are self-contained packages with views, assets, components, and mail templates.

## Introduction

Themes in Cartino provide:
- ðŸŽ¨ **Complete storefront** - Layouts, pages, components
- ðŸ“§ **Email templates** - Transactional emails styled to match
- ðŸ§© **Blade components** - Reusable UI components
- âš™ï¸ **Configuration** - Theme settings and customization
- ðŸ“¦ **Asset pipeline** - CSS, JS, images bundled
- ðŸ”„ **Hot-swappable** - Switch themes without downtime
- ðŸŽ­ **Child themes** - Extend parent themes with overrides

## Theme Structure

### Directory Layout

```
themes/
â”œâ”€â”€ default/                    # Theme name
â”‚   â”œâ”€â”€ theme.json             # Theme metadata
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ theme.php          # Theme configuration
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â”‚   â”œâ”€â”€ app.blade.php
â”‚   â”‚   â”‚   â””â”€â”€ checkout.blade.php
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ home.blade.php
â”‚   â”‚   â”‚   â”œâ”€â”€ products/
â”‚   â”‚   â”‚   â”œâ”€â”€ cart.blade.php
â”‚   â”‚   â”‚   â””â”€â”€ checkout/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ header.blade.php
â”‚   â”‚   â”‚   â”œâ”€â”€ footer.blade.php
â”‚   â”‚   â”‚   â””â”€â”€ product-card.blade.php
â”‚   â”‚   â”œâ”€â”€ emails/
â”‚   â”‚   â”‚   â”œâ”€â”€ orders/
â”‚   â”‚   â”‚   â””â”€â”€ customers/
â”‚   â”‚   â””â”€â”€ partials/
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”‚   â””â”€â”€ theme.css
â”‚   â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”‚   â””â”€â”€ theme.js
â”‚   â”‚   â””â”€â”€ images/
â”‚   â”‚       â”œâ”€â”€ logo.svg
â”‚   â”‚       â””â”€â”€ placeholders/
â”‚   â”œâ”€â”€ lang/
â”‚   â”‚   â”œâ”€â”€ en/
â”‚   â”‚   â””â”€â”€ it/
â”‚   â”œâ”€â”€ resources/
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”‚   â””â”€â”€ app.css
â”‚   â”‚   â””â”€â”€ js/
â”‚   â”‚       â””â”€â”€ app.js
â”‚   â”œâ”€â”€ composer.json          # Optional dependencies
â”‚   â”œâ”€â”€ package.json           # Frontend dependencies
â”‚   â”œâ”€â”€ tailwind.config.js     # Tailwind configuration
â”‚   â”œâ”€â”€ vite.config.js         # Vite build config
â”‚   â””â”€â”€ README.md              # Theme documentation
```

## Creating a Theme

### Initialize Theme

```bash
php artisan cartino:make-theme my-theme
```

This scaffolds a new theme with the base structure.

### Theme Metadata

`themes/my-theme/theme.json`:

```json
{
  "name": "My Beautiful Theme",
  "handle": "my-theme",
  "version": "1.0.0",
  "description": "A modern, responsive e-commerce theme",
  "author": {
    "name": "John Doe",
    "email": "[email protected]",
    "url": "https://example.com"
  },
  "homepage": "https://github.com/johndoe/my-theme",
  "license": "MIT",
  "keywords": ["cartino", "theme", "e-commerce"],
  "support": {
    "docs": "https://docs.example.com",
    "issues": "https://github.com/johndoe/my-theme/issues"
  },
  "parent": null,
  "screenshots": [
    "screenshots/home.png",
    "screenshots/product.png",
    "screenshots/cart.png"
  ],
  "demo": "https://demo.example.com",
  "requires": {
    "cartino": "^1.0",
    "php": "^8.2"
  },
  "features": [
    "responsive",
    "dark-mode",
    "mega-menu",
    "quick-view",
    "wishlist"
  ],
  "settings": {
    "customizable_colors": true,
    "typography_options": true,
    "layout_options": true
  }
}
```

### Theme Configuration

`themes/my-theme/config/theme.php`:

```php
return [
    /*
    |--------------------------------------------------------------------------
    | Theme Settings
    |--------------------------------------------------------------------------
    */

    'colors' => [
        'primary' => env('THEME_PRIMARY_COLOR', '#3490dc'),
        'secondary' => env('THEME_SECONDARY_COLOR', '#ffed4e'),
        'accent' => env('THEME_ACCENT_COLOR', '#e3342f'),
    ],

    'typography' => [
        'font_family' => env('THEME_FONT_FAMILY', 'Inter, sans-serif'),
        'heading_font' => env('THEME_HEADING_FONT', 'Poppins, sans-serif'),
    ],

    'layout' => [
        'max_width' => env('THEME_MAX_WIDTH', '1280px'),
        'container_padding' => env('THEME_CONTAINER_PADDING', '1rem'),
        'header_sticky' => env('THEME_HEADER_STICKY', true),
    ],

    'features' => [
        'dark_mode' => env('THEME_DARK_MODE', true),
        'quick_view' => env('THEME_QUICK_VIEW', true),
        'wishlist' => env('THEME_WISHLIST', true),
        'compare' => env('THEME_COMPARE', false),
    ],

    'social' => [
        'facebook' => env('THEME_FACEBOOK_URL', ''),
        'instagram' => env('THEME_INSTAGRAM_URL', ''),
        'twitter' => env('THEME_TWITTER_URL', ''),
    ],
];
```

## Theme Views

### Main Layout

`themes/my-theme/views/layouts/app.blade.php`:

```blade
<!DOCTYPE html>
<html lang="{{ app()->getLocale() }}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="csrf-token" content="{{ csrf_token() }}">

    <title>{{ $title ?? config('app.name') }}</title>

    @vite(['themes/my-theme/resources/css/app.css', 'themes/my-theme/resources/js/app.js'])

    @stack('styles')
</head>
<body class="antialiased">
    <x-theme::header />

    <main class="min-h-screen">
        {{ $slot }}
    </main>

    <x-theme::footer />

    @stack('scripts')
</body>
</html>
```

### Home Page

`themes/my-theme/views/pages/home.blade.php`:

```blade
<x-theme::layout>
    <x-slot:title>Home - {{ config('app.name') }}</x-slot>

    {{-- Hero Section --}}
    <section class="hero">
        <div class="container">
            <h1>{{ setting('hero_title', 'Welcome to Our Store') }}</h1>
            <p>{{ setting('hero_subtitle') }}</p>
            <a href="{{ route('products.index') }}" class="btn btn-primary">
                Shop Now
            </a>
        </div>
    </section>

    {{-- Featured Products --}}
    <section class="featured-products">
        <div class="container">
            <h2>Featured Products</h2>

            <div class="product-grid">
                @foreach($featuredProducts as $product)
                    <x-theme::product-card :product="$product" />
                @endforeach
            </div>
        </div>
    </section>

    {{-- Categories --}}
    <section class="categories">
        <div class="container">
            <h2>Shop by Category</h2>

            <div class="category-grid">
                @foreach($categories as $category)
                    <x-theme::category-card :category="$category" />
                @endforeach
            </div>
        </div>
    </section>
</x-theme::layout>
```

### Product Page

`themes/my-theme/views/pages/products/show.blade.php`:

```blade
<x-theme::layout>
    <x-slot:title>{{ $product->name }}</x-slot>

    <div class="product-page container">
        <div class="product-layout">
            {{-- Product Images --}}
            <div class="product-images">
                <x-theme::product-gallery :product="$product" />
            </div>

            {{-- Product Details --}}
            <div class="product-details">
                <h1>{{ $product->name }}</h1>

                <div class="product-price">
                    {{ money($product->price) }}
                </div>

                <div class="product-description">
                    {!! $product->description !!}
                </div>

                <x-theme::add-to-cart-form :product="$product" />

                {{-- Custom Fields --}}
                @if($product->getField('fabric'))
                    <div class="product-info">
                        <strong>Fabric:</strong>
                        {{ $product->getField('fabric') }}
                    </div>
                @endif
            </div>
        </div>

        {{-- Related Products --}}
        <x-theme::related-products :product="$product" />
    </div>
</x-theme::layout>
```

## Blade Components

### Product Card Component

`themes/my-theme/views/components/product-card.blade.php`:

```blade
@props(['product'])

<div {{ $attributes->merge(['class' => 'product-card']) }}>
    <a href="{{ route('products.show', $product) }}">
        <div class="product-image">
            <img
                src="{{ $product->getFirstMediaUrl('images', 'thumb') }}"
                alt="{{ $product->name }}"
                loading="lazy"
            />
        </div>

        <div class="product-info">
            <h3 class="product-name">{{ $product->name }}</h3>

            <div class="product-price">
                {{ money($product->price) }}
            </div>

            @if($product->getField('fabric'))
                <span class="product-badge">
                    {{ $product->getField('fabric') }}
                </span>
            @endif
        </div>
    </a>

    <button
        class="btn-add-to-cart"
        wire:click="addToCart({{ $product->id }})"
    >
        Add to Cart
    </button>
</div>
```

### Register Component

`themes/my-theme/ThemeServiceProvider.php`:

```php
namespace Themes\MyTheme;

use Illuminate\Support\ServiceProvider;
use Illuminate\Support\Facades\Blade;

class ThemeServiceProvider extends ServiceProvider
{
    public function boot()
    {
        // Register components
        Blade::componentNamespace('Themes\\MyTheme\\Components', 'theme');

        // Load views
        $this->loadViewsFrom(__DIR__ . '/views', 'theme');

        // Publish assets
        $this->publishes([
            __DIR__ . '/public' => public_path('themes/my-theme'),
        ], 'theme-assets');
    }
}
```

## Email Templates

Include email templates styled to match the theme:

### Order Confirmation Email

`themes/my-theme/views/emails/orders/confirmation.blade.php`:

```blade
@component('mail::message')
# Order Confirmation

Hi {{ $order->customer->name }},

Thank you for your order! We're getting it ready to ship.

@component('mail::panel')
**Order Number:** #{{ $order->number }}
**Order Date:** {{ $order->created_at->format('F j, Y') }}
@endcomponent

## Order Items

@component('mail::table')
| Product | Quantity | Price |
|---------|----------|-------|
@foreach($order->items as $item)
| {{ $item->product->name }} | {{ $item->quantity }} | {{ money($item->price) }} |
@endforeach
@endcomponent

**Total:** {{ money($order->total) }}

@component('mail::button', ['url' => route('orders.show', $order)])
View Your Order
@endcomponent

Thanks,<br>
{{ config('app.name') }}
@endcomponent
```

## Asset Pipeline

### Tailwind Configuration

`themes/my-theme/tailwind.config.js`:

```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    './views/**/*.blade.php',
    './resources/**/*.js',
    './resources/**/*.vue',
  ],
  theme: {
    extend: {
      colors: {
        primary: '#3490dc',
        secondary: '#ffed4e',
        accent: '#e3342f',
      },
      fontFamily: {
        sans: ['Inter', 'sans-serif'],
        heading: ['Poppins', 'sans-serif'],
      },
      maxWidth: {
        'container': '1280px',
      },
    },
  },
  plugins: [
    require('@tailwindcss/forms'),
    require('@tailwindcss/typography'),
  ],
}
```

### Vite Configuration

`themes/my-theme/vite.config.js`:

```javascript
import { defineConfig } from 'vite'

export default defineConfig({
  build: {
    outDir: 'public',
    rollupOptions: {
      input: {
        css: 'resources/css/app.css',
        js: 'resources/js/app.js',
      },
      output: {
        entryFileNames: 'js/[name].js',
        assetFileNames: 'css/[name].[ext]',
      },
    },
  },
})
```

### Build Assets

```bash
cd themes/my-theme

# Install dependencies
npm install

# Build for production
npm run build

# Or watch for changes
npm run dev
```

## Theme Settings Panel

Allow merchants to customize the theme:

### Settings Form

`themes/my-theme/views/admin/settings.blade.php`:

```blade
<form action="{{ route('admin.theme.settings.update') }}" method="POST">
    @csrf

    <div class="settings-section">
        <h3>Colors</h3>

        <label>
            Primary Color
            <input type="color" name="colors[primary]" value="{{ config('theme.colors.primary') }}">
        </label>

        <label>
            Secondary Color
            <input type="color" name="colors[secondary]" value="{{ config('theme.colors.secondary') }}">
        </label>
    </div>

    <div class="settings-section">
        <h3>Typography</h3>

        <label>
            Font Family
            <select name="typography[font_family]">
                <option value="Inter">Inter</option>
                <option value="Poppins">Poppins</option>
                <option value="Roboto">Roboto</option>
            </select>
        </label>
    </div>

    <div class="settings-section">
        <h3>Features</h3>

        <label>
            <input type="checkbox" name="features[dark_mode]" {{ config('theme.features.dark_mode') ? 'checked' : '' }}>
            Enable Dark Mode
        </label>

        <label>
            <input type="checkbox" name="features[quick_view]" {{ config('theme.features.quick_view') ? 'checked' : '' }}>
            Enable Quick View
        </label>
    </div>

    <button type="submit" class="btn btn-primary">Save Settings</button>
</form>
```

## Child Themes

Extend parent themes with overrides:

### Child Theme Structure

```
themes/
â”œâ”€â”€ my-theme/              # Parent theme
â””â”€â”€ my-theme-child/        # Child theme
    â”œâ”€â”€ theme.json
    â”œâ”€â”€ views/
    â”‚   â””â”€â”€ components/
    â”‚       â””â”€â”€ header.blade.php  # Override parent header
    â””â”€â”€ public/
        â””â”€â”€ css/
            â””â”€â”€ custom.css
```

### Child Theme Config

`themes/my-theme-child/theme.json`:

```json
{
  "name": "My Theme Child",
  "handle": "my-theme-child",
  "version": "1.0.0",
  "parent": "my-theme",
  "description": "Custom version of My Theme"
}
```

Child theme inherits all parent views but can override any file.

## Installing Themes

### Manual Installation

1. Copy theme to `themes/` directory
2. Run migrations (if any)
3. Publish assets
4. Activate theme

```bash
# Publish theme assets
php artisan vendor:publish --tag=theme-assets --force

# Activate theme
php artisan cartino:theme:activate my-theme
```

### Via Composer

`composer.json`:

```json
{
  "require": {
    "cartino-themes/my-theme": "^1.0"
  },
  "repositories": [
    {
      "type": "vcs",
      "url": "https://github.com/username/my-theme"
    }
  ]
}
```

```bash
composer require cartino-themes/my-theme
php artisan cartino:theme:activate my-theme
```

## Publishing Themes

### Prepare for Distribution

1. **Clean up development files**

```bash
# .gitignore
node_modules/
vendor/
.env
.DS_Store
*.log
```

2. **Build production assets**

```bash
npm run build
```

3. **Write documentation**

Create `README.md` with:
- Installation instructions
- Theme features
- Customization guide
- Support information

4. **Add screenshots**

```
screenshots/
â”œâ”€â”€ home.png
â”œâ”€â”€ product.png
â”œâ”€â”€ cart.png
â””â”€â”€ checkout.png
```

### Package for Marketplace

Create `composer.json`:

```json
{
  "name": "cartino-themes/my-theme",
  "description": "A beautiful e-commerce theme for Cartino",
  "type": "cartino-theme",
  "keywords": ["cartino", "theme", "e-commerce"],
  "license": "MIT",
  "authors": [
    {
      "name": "John Doe",
      "email": "[email protected]"
    }
  ],
  "require": {
    "php": "^8.2",
    "cartino/framework": "^1.0"
  },
  "autoload": {
    "psr-4": {
      "Themes\\MyTheme\\": ""
    }
  },
  "extra": {
    "cartino": {
      "theme": true
    }
  }
}
```

### Submit to Marketplace

1. Create GitHub repository
2. Tag release version
3. Submit to Cartino Theme Marketplace
4. Wait for review

```bash
git tag -a v1.0.0 -m "Release version 1.0.0"
git push origin v1.0.0
```

## Theme Marketplace

### Listing Requirements

- âœ… Complete theme.json
- âœ… Documentation (README.md)
- âœ… Screenshots (min 3)
- âœ… Working demo site
- âœ… Responsive design
- âœ… Browser compatibility
- âœ… Performance optimized
- âœ… Accessibility standards

### Pricing Models

**Free Themes:**
- Open source (MIT license)
- Listed on marketplace
- Community support

**Premium Themes:**
- Commercial license
- Price: â‚¬49-â‚¬199
- Priority support
- Regular updates
- Documentation included

**Theme Club:**
- Subscription model
- Access to all themes
- â‚¬29/month

## Theme Updates

### Versioning

Follow [Semantic Versioning](https://semver.org/):

- **Major (1.0.0)**: Breaking changes
- **Minor (1.1.0)**: New features, backwards compatible
- **Patch (1.0.1)**: Bug fixes

### Update Mechanism

```bash
# Update theme via composer
composer update cartino-themes/my-theme

# Publish new assets
php artisan vendor:publish --tag=theme-assets --force

# Clear cache
php artisan view:clear
php artisan config:clear
```

### Changelog

Maintain `CHANGELOG.md`:

```markdown
# Changelog

## [1.1.0] - 2025-12-09

### Added
- Dark mode support
- Quick view modal
- Product comparison feature

### Fixed
- Mobile menu z-index issue
- Cart drawer animation

### Changed
- Updated Tailwind to v3.4
- Improved accessibility
```

## Best Practices

### 1. Mobile-First Design

```css
/* Mobile first */
.product-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
}

/* Tablet */
@media (min-width: 768px) {
  .product-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Desktop */
@media (min-width: 1024px) {
  .product-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}
```

### 2. Performance Optimization

- Lazy load images
- Minify CSS/JS
- Use CDN for assets
- Optimize images (WebP)
- Reduce HTTP requests

### 3. Accessibility

- Semantic HTML
- ARIA labels
- Keyboard navigation
- Color contrast (WCAG AA)
- Screen reader support

### 4. Browser Compatibility

Test on:
- Chrome/Edge (latest 2 versions)
- Firefox (latest 2 versions)
- Safari (latest 2 versions)
- iOS Safari
- Android Chrome

### 5. Documentation

Include:
- Installation guide
- Customization options
- Component reference
- FAQ
- Support contact

## Testing Themes

### Visual Regression Testing

Use tools like:
- **Percy**: Visual testing
- **BackstopJS**: CSS regression
- **Playwright**: E2E testing

### Automated Testing

```php
// Test theme renders correctly
test('theme home page renders', function () {
    Theme::activate('my-theme');

    $response = $this->get('/');

    $response->assertOk()
        ->assertViewIs('theme::pages.home')
        ->assertSee('Featured Products');
});
```

## Resources

- [Statamic Themes Documentation](https://statamic.dev/themes)
- [Blade Components](https://laravel.com/docs/blade#components)
- [Tailwind CSS](https://tailwindcss.com/)
- [Vite](https://vitejs.dev/)

## Next Steps

- **[Storefront â†’](/storefront)** - Storefront development guide
- **[Addons â†’](/extending/addons)** - Create theme-compatible addons
- **[Blade Components â†’](/storefront#components)** - Component library
