# Vue Components Development

Learn how to build custom Vue 3 components for Cartino's admin panel using modern patterns, TypeScript, and Tailwind CSS.

## Introduction

Cartino's admin panel is built with:
- **Vue 3** with Composition API
- **Inertia.js** for seamless Laravel integration
- **TypeScript** for type safety
- **Pinia** for state management
- **Reka UI** for headless components
- **Tailwind CSS** for styling

## Component Architecture

### Directory Structure

```
resources/js/
├── Components/
│   ├── UI/                    # Base UI components
│   │   ├── Button.vue
│   │   ├── Input.vue
│   │   ├── Select.vue
│   │   └── Modal.vue
│   ├── Form/                  # Form components
│   │   ├── TextInput.vue
│   │   ├── SelectInput.vue
│   │   └── FileUpload.vue
│   ├── Products/              # Product-specific
│   │   ├── ProductCard.vue
│   │   ├── ProductForm.vue
│   │   └── ProductGallery.vue
│   └── Layout/                # Layout components
│       ├── Header.vue
│       ├── Sidebar.vue
│       └── Footer.vue
├── Pages/                     # Inertia pages
│   ├── Products/
│   │   ├── Index.vue
│   │   ├── Create.vue
│   │   └── Edit.vue
│   └── Dashboard.vue
├── Composables/               # Reusable logic
│   ├── useApi.ts
│   ├── useForm.ts
│   └── useNotification.ts
└── Stores/                    # Pinia stores
    ├── products.ts
    ├── cart.ts
    └── auth.ts
```

## Creating Components

### Basic Component Structure

```vue
<script setup lang="ts">
import { ref, computed } from 'vue'

// Define props interface
interface Props {
  title: string
  subtitle?: string
  variant?: 'primary' | 'secondary'
}

// Define props with defaults
const props = withDefaults(defineProps<Props>(), {
  variant: 'primary',
})

// Define emits
const emit = defineEmits<{
  click: []
  change: [value: string]
}>()

// Component state
const isActive = ref(false)

// Computed properties
const cssClasses = computed(() => ({
  'card': true,
  'card-active': isActive.value,
  [`card-${props.variant}`]: true,
}))

// Methods
const handleClick = () => {
  isActive.value = !isActive.value
  emit('click')
}
</script>

<template>
  <div :class="cssClasses" @click="handleClick">
    <h2>{{ title }}</h2>
    <p v-if="subtitle">{{ subtitle }}</p>
    <slot />
  </div>
</template>

<style scoped>
.card {
  @apply rounded-lg border p-4 shadow-sm;
}

.card-primary {
  @apply border-blue-200 bg-blue-50;
}

.card-secondary {
  @apply border-gray-200 bg-gray-50;
}

.card-active {
  @apply ring-2 ring-blue-500;
}
</style>
```

## UI Component Library

### Button Component

```vue
<!-- Components/UI/Button.vue -->
<script setup lang="ts">
import { computed } from 'vue'

interface Props {
  variant?: 'primary' | 'secondary' | 'danger'
  size?: 'sm' | 'md' | 'lg'
  loading?: boolean
  disabled?: boolean
  as?: 'button' | 'a'
}

const props = withDefaults(defineProps<Props>(), {
  variant: 'primary',
  size: 'md',
  as: 'button',
})

const classes = computed(() => {
  const base = 'inline-flex items-center justify-center font-medium rounded-lg transition-colors'

  const variants = {
    primary: 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500',
    secondary: 'bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-400',
    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',
  }

  const sizes = {
    sm: 'px-3 py-1.5 text-sm',
    md: 'px-4 py-2 text-base',
    lg: 'px-6 py-3 text-lg',
  }

  const state = props.disabled || props.loading
    ? 'opacity-50 cursor-not-allowed'
    : 'focus:outline-none focus:ring-2 focus:ring-offset-2'

  return `${base} ${variants[props.variant]} ${sizes[props.size]} ${state}`
})
</script>

<template>
  <component
    :is="as"
    :class="classes"
    :disabled="disabled || loading"
  >
    <svg
      v-if="loading"
      class="animate-spin -ml-1 mr-2 h-4 w-4"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
    >
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
    </svg>

    <slot />
  </component>
</template>
```

### Input Component

```vue
<!-- Components/UI/Input.vue -->
<script setup lang="ts">
import { computed, useAttrs } from 'vue'

interface Props {
  modelValue: string | number
  label?: string
  error?: string
  hint?: string
  required?: boolean
}

const props = defineProps<Props>()
const emit = defineEmits<{
  'update:modelValue': [value: string | number]
}>()

const attrs = useAttrs()

const inputClasses = computed(() => ({
  'w-full rounded-lg border px-4 py-2 text-gray-900 transition-colors': true,
  'border-gray-300 focus:border-blue-500 focus:ring-blue-500': !props.error,
  'border-red-300 focus:border-red-500 focus:ring-red-500': props.error,
}))

const handleInput = (event: Event) => {
  const target = event.target as HTMLInputElement
  emit('update:modelValue', target.value)
}
</script>

<template>
  <div class="space-y-1">
    <label v-if="label" class="block text-sm font-medium text-gray-700">
      {{ label }}
      <span v-if="required" class="text-red-500">*</span>
    </label>

    <input
      :value="modelValue"
      :class="inputClasses"
      v-bind="attrs"
      @input="handleInput"
    />

    <p v-if="hint && !error" class="text-sm text-gray-500">
      {{ hint }}
    </p>

    <p v-if="error" class="text-sm text-red-600">
      {{ error }}
    </p>
  </div>
</template>
```

### Modal Component

```vue
<!-- Components/UI/Modal.vue -->
<script setup lang="ts">
import { Dialog, DialogPanel, DialogTitle, TransitionRoot, TransitionChild } from '@headlessui/vue'
import { XMarkIcon } from '@heroicons/vue/24/outline'

interface Props {
  open: boolean
  title?: string
  size?: 'sm' | 'md' | 'lg' | 'xl'
}

const props = withDefaults(defineProps<Props>(), {
  size: 'md',
})

const emit = defineEmits<{
  close: []
}>()

const sizeClasses = {
  sm: 'max-w-sm',
  md: 'max-w-md',
  lg: 'max-w-lg',
  xl: 'max-w-xl',
}
</script>

<template>
  <TransitionRoot :show="open" as="template">
    <Dialog as="div" class="relative z-50" @close="emit('close')">
      <TransitionChild
        as="template"
        enter="ease-out duration-300"
        enter-from="opacity-0"
        enter-to="opacity-100"
        leave="ease-in duration-200"
        leave-from="opacity-100"
        leave-to="opacity-0"
      >
        <div class="fixed inset-0 bg-black bg-opacity-25" />
      </TransitionChild>

      <div class="fixed inset-0 overflow-y-auto">
        <div class="flex min-h-full items-center justify-center p-4">
          <TransitionChild
            as="template"
            enter="ease-out duration-300"
            enter-from="opacity-0 scale-95"
            enter-to="opacity-100 scale-100"
            leave="ease-in duration-200"
            leave-from="opacity-100 scale-100"
            leave-to="opacity-0 scale-95"
          >
            <DialogPanel
              :class="[
                'w-full transform rounded-2xl bg-white p-6 shadow-xl transition-all',
                sizeClasses[size],
              ]"
            >
              <div class="flex items-start justify-between mb-4">
                <DialogTitle v-if="title" as="h3" class="text-lg font-medium text-gray-900">
                  {{ title }}
                </DialogTitle>

                <button
                  type="button"
                  class="text-gray-400 hover:text-gray-500"
                  @click="emit('close')"
                >
                  <XMarkIcon class="h-6 w-6" />
                </button>
              </div>

              <slot />

              <div v-if="$slots.footer" class="mt-6 flex justify-end space-x-2">
                <slot name="footer" />
              </div>
            </DialogPanel>
          </TransitionChild>
        </div>
      </div>
    </Dialog>
  </TransitionRoot>
</template>
```

## Form Components

### Form Builder

```vue
<!-- Components/Form/FormBuilder.vue -->
<script setup lang="ts">
import { ref, reactive } from 'vue'
import TextInput from './TextInput.vue'
import SelectInput from './SelectInput.vue'
import FileUpload from './FileUpload.vue'

interface Field {
  type: string
  name: string
  label: string
  rules?: string[]
  options?: { value: string; label: string }[]
  [key: string]: any
}

interface Props {
  fields: Field[]
  initialData?: Record<string, any>
}

const props = defineProps<Props>()
const emit = defineEmits<{
  submit: [data: Record<string, any>]
}>()

const formData = reactive(props.initialData || {})
const errors = ref<Record<string, string>>({})

const getComponent = (type: string) => {
  const components: Record<string, any> = {
    text: TextInput,
    email: TextInput,
    number: TextInput,
    select: SelectInput,
    file: FileUpload,
  }
  return components[type] || TextInput
}

const handleSubmit = () => {
  // Validate
  errors.value = {}

  props.fields.forEach(field => {
    if (field.rules?.includes('required') && !formData[field.name]) {
      errors.value[field.name] = `${field.label} is required`
    }
  })

  if (Object.keys(errors.value).length === 0) {
    emit('submit', formData)
  }
}
</script>

<template>
  <form @submit.prevent="handleSubmit" class="space-y-6">
    <component
      v-for="field in fields"
      :key="field.name"
      :is="getComponent(field.type)"
      v-model="formData[field.name]"
      :label="field.label"
      :error="errors[field.name]"
      v-bind="field"
    />

    <div class="flex justify-end space-x-2">
      <slot name="actions" :submit="handleSubmit">
        <Button type="submit">Submit</Button>
      </slot>
    </div>
  </form>
</template>
```

## Product Components

### Product Card

```vue
<!-- Components/Products/ProductCard.vue -->
<script setup lang="ts">
import { computed } from 'vue'
import { Link } from '@inertiajs/vue3'
import { HeartIcon, ShoppingCartIcon } from '@heroicons/vue/24/outline'
import { HeartIcon as HeartIconSolid } from '@heroicons/vue/24/solid'
import type { Product } from '@/Types'

interface Props {
  product: Product
  showActions?: boolean
}

const props = withDefaults(defineProps<Props>(), {
  showActions: true,
})

const emit = defineEmits<{
  addToCart: [productId: number]
  toggleWishlist: [productId: number]
}>()

const imageUrl = computed(() => {
  return props.product.images?.[0]?.url || '/images/placeholder.png'
})

const formattedPrice = computed(() => {
  return new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'USD',
  }).format(props.product.price / 100)
})
</script>

<template>
  <div class="group relative rounded-lg border border-gray-200 bg-white p-4 shadow-sm transition-shadow hover:shadow-md">
    <Link :href="`/products/${product.id}`" class="block">
      <div class="aspect-square overflow-hidden rounded-lg bg-gray-100">
        <img
          :src="imageUrl"
          :alt="product.name"
          class="h-full w-full object-cover object-center group-hover:scale-105 transition-transform"
        />
      </div>

      <div class="mt-4">
        <h3 class="text-sm font-medium text-gray-900 line-clamp-2">
          {{ product.name }}
        </h3>

        <p class="mt-1 text-lg font-bold text-gray-900">
          {{ formattedPrice }}
        </p>

        <div v-if="product.fields?.fabric" class="mt-2">
          <span class="inline-flex items-center rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-800">
            {{ product.fields.fabric }}
          </span>
        </div>
      </div>
    </Link>

    <div v-if="showActions" class="mt-4 flex space-x-2">
      <button
        @click="emit('addToCart', product.id)"
        class="flex-1 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition-colors"
      >
        <ShoppingCartIcon class="inline-block h-5 w-5 mr-1" />
        Add to Cart
      </button>

      <button
        @click="emit('toggleWishlist', product.id)"
        class="rounded-lg border border-gray-300 p-2 text-gray-700 hover:bg-gray-50 transition-colors"
      >
        <HeartIconSolid v-if="product.in_wishlist" class="h-5 w-5 text-red-500" />
        <HeartIcon v-else class="h-5 w-5" />
      </button>
    </div>
  </div>
</template>
```

### Product Form

```vue
<!-- Components/Products/ProductForm.vue -->
<script setup lang="ts">
import { ref, reactive } from 'vue'
import { useForm } from '@inertiajs/vue3'
import Input from '@/Components/UI/Input.vue'
import TextArea from '@/Components/UI/TextArea.vue'
import Select from '@/Components/UI/Select.vue'
import FileUpload from '@/Components/UI/FileUpload.vue'
import Button from '@/Components/UI/Button.vue'
import type { Product, Category } from '@/Types'

interface Props {
  product?: Product
  categories: Category[]
}

const props = defineProps<Props>()

const form = useForm({
  name: props.product?.name || '',
  slug: props.product?.slug || '',
  description: props.product?.description || '',
  price: props.product?.price || 0,
  category_id: props.product?.category_id || null,
  is_active: props.product?.is_active ?? true,
  fields: props.product?.fields || {},
  images: [],
})

const handleSubmit = () => {
  if (props.product) {
    form.put(`/admin/products/${props.product.id}`)
  } else {
    form.post('/admin/products')
  }
}

// Auto-generate slug from name
const generateSlug = () => {
  form.slug = form.name
    .toLowerCase()
    .replace(/[^a-z0-9]+/g, '-')
    .replace(/(^-|-$)/g, '')
}
</script>

<template>
  <form @submit.prevent="handleSubmit" class="space-y-6">
    <div class="grid grid-cols-1 gap-6 lg:grid-cols-2">
      <Input
        v-model="form.name"
        label="Product Name"
        required
        :error="form.errors.name"
        @blur="generateSlug"
      />

      <Input
        v-model="form.slug"
        label="Slug"
        required
        :error="form.errors.slug"
        hint="URL-friendly version of the name"
      />
    </div>

    <TextArea
      v-model="form.description"
      label="Description"
      rows="4"
      :error="form.errors.description"
    />

    <div class="grid grid-cols-1 gap-6 lg:grid-cols-2">
      <Input
        v-model.number="form.price"
        type="number"
        label="Price (cents)"
        required
        :error="form.errors.price"
        hint="Enter price in cents (e.g., 2999 for $29.99)"
      />

      <Select
        v-model="form.category_id"
        label="Category"
        :options="categories"
        option-label="name"
        option-value="id"
        :error="form.errors.category_id"
      />
    </div>

    <!-- Blueprint Fields -->
    <div v-if="product?.blueprint" class="rounded-lg border border-gray-200 p-6">
      <h3 class="text-lg font-medium text-gray-900 mb-4">Custom Fields</h3>

      <BlueprintFields
        v-model="form.fields"
        :blueprint="product.blueprint"
        :errors="form.errors"
      />
    </div>

    <FileUpload
      v-model="form.images"
      label="Product Images"
      multiple
      accept="image/*"
      :error="form.errors.images"
    />

    <div class="flex items-center">
      <input
        v-model="form.is_active"
        type="checkbox"
        id="is_active"
        class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
      />
      <label for="is_active" class="ml-2 block text-sm text-gray-900">
        Active (visible in storefront)
      </label>
    </div>

    <div class="flex justify-end space-x-3">
      <Button
        as="a"
        href="/admin/products"
        variant="secondary"
      >
        Cancel
      </Button>

      <Button
        type="submit"
        :loading="form.processing"
        :disabled="form.processing"
      >
        {{ product ? 'Update' : 'Create' }} Product
      </Button>
    </div>
  </form>
</template>
```

## Composables

### useApi Composable

```typescript
// Composables/useApi.ts
import { ref } from 'vue'
import axios, { AxiosError } from 'axios'

export interface ApiResponse<T> {
  data: T
  message?: string
}

export interface ApiError {
  message: string
  errors?: Record<string, string[]>
}

export function useApi<T>() {
  const data = ref<T | null>(null)
  const error = ref<ApiError | null>(null)
  const loading = ref(false)

  const request = async (
    method: 'get' | 'post' | 'put' | 'delete',
    url: string,
    payload?: any
  ) => {
    loading.value = true
    error.value = null

    try {
      const response = await axios[method]<ApiResponse<T>>(url, payload)
      data.value = response.data.data
      return response.data
    } catch (err) {
      const axiosError = err as AxiosError<ApiError>
      error.value = axiosError.response?.data || {
        message: 'An error occurred',
      }
      throw error.value
    } finally {
      loading.value = false
    }
  }

  const get = (url: string) => request('get', url)
  const post = (url: string, payload: any) => request('post', url, payload)
  const put = (url: string, payload: any) => request('put', url, payload)
  const del = (url: string) => request('delete', url)

  return {
    data,
    error,
    loading,
    get,
    post,
    put,
    delete: del,
  }
}
```

### useNotification Composable

```typescript
// Composables/useNotification.ts
import { ref } from 'vue'

interface Notification {
  id: string
  type: 'success' | 'error' | 'warning' | 'info'
  message: string
  duration?: number
}

const notifications = ref<Notification[]>([])

export function useNotification() {
  const notify = (
    type: Notification['type'],
    message: string,
    duration = 5000
  ) => {
    const id = Math.random().toString(36).substring(7)

    notifications.value.push({ id, type, message, duration })

    if (duration > 0) {
      setTimeout(() => {
        remove(id)
      }, duration)
    }
  }

  const remove = (id: string) => {
    const index = notifications.value.findIndex(n => n.id === id)
    if (index > -1) {
      notifications.value.splice(index, 1)
    }
  }

  return {
    notifications,
    notify,
    success: (message: string, duration?: number) =>
      notify('success', message, duration),
    error: (message: string, duration?: number) =>
      notify('error', message, duration),
    warning: (message: string, duration?: number) =>
      notify('warning', message, duration),
    info: (message: string, duration?: number) =>
      notify('info', message, duration),
    remove,
  }
}
```

## Pinia Stores

### Products Store

```typescript
// Stores/products.ts
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'
import type { Product } from '@/Types'
import axios from 'axios'

export const useProductsStore = defineStore('products', () => {
  // State
  const products = ref<Product[]>([])
  const currentProduct = ref<Product | null>(null)
  const loading = ref(false)
  const filters = ref({
    search: '',
    category_id: null,
    is_active: null,
  })

  // Getters
  const filteredProducts = computed(() => {
    return products.value.filter(product => {
      if (filters.value.search) {
        const search = filters.value.search.toLowerCase()
        if (!product.name.toLowerCase().includes(search)) {
          return false
        }
      }

      if (filters.value.category_id) {
        if (product.category_id !== filters.value.category_id) {
          return false
        }
      }

      if (filters.value.is_active !== null) {
        if (product.is_active !== filters.value.is_active) {
          return false
        }
      }

      return true
    })
  })

  // Actions
  const fetchProducts = async () => {
    loading.value = true
    try {
      const response = await axios.get('/api/products')
      products.value = response.data.data
    } catch (error) {
      console.error('Failed to fetch products:', error)
    } finally {
      loading.value = false
    }
  }

  const fetchProduct = async (id: number) => {
    loading.value = true
    try {
      const response = await axios.get(`/api/products/${id}`)
      currentProduct.value = response.data.data
    } catch (error) {
      console.error('Failed to fetch product:', error)
    } finally {
      loading.value = false
    }
  }

  const createProduct = async (data: Partial<Product>) => {
    const response = await axios.post('/api/products', data)
    products.value.push(response.data.data)
    return response.data.data
  }

  const updateProduct = async (id: number, data: Partial<Product>) => {
    const response = await axios.put(`/api/products/${id}`, data)
    const index = products.value.findIndex(p => p.id === id)
    if (index > -1) {
      products.value[index] = response.data.data
    }
    return response.data.data
  }

  const deleteProduct = async (id: number) => {
    await axios.delete(`/api/products/${id}`)
    const index = products.value.findIndex(p => p.id === id)
    if (index > -1) {
      products.value.splice(index, 1)
    }
  }

  return {
    products,
    currentProduct,
    loading,
    filters,
    filteredProducts,
    fetchProducts,
    fetchProduct,
    createProduct,
    updateProduct,
    deleteProduct,
  }
})
```

## TypeScript Types

```typescript
// Types/index.ts
export interface Product {
  id: number
  name: string
  slug: string
  description: string
  price: number
  category_id: number | null
  category?: Category
  is_active: boolean
  fields: Record<string, any>
  images?: Media[]
  variants?: ProductVariant[]
  created_at: string
  updated_at: string
}

export interface Category {
  id: number
  name: string
  slug: string
  parent_id: number | null
  children?: Category[]
}

export interface Media {
  id: number
  url: string
  thumb_url: string
  name: string
  size: number
  mime_type: string
}

export interface ProductVariant {
  id: number
  product_id: number
  sku: string
  price: number
  inventory_quantity: number
  options: Record<string, string>
}
```

## Testing Components

```typescript
// Tests/Components/Button.spec.ts
import { mount } from '@vue/test-utils'
import { describe, it, expect } from 'vitest'
import Button from '@/Components/UI/Button.vue'

describe('Button', () => {
  it('renders correctly', () => {
    const wrapper = mount(Button, {
      slots: {
        default: 'Click me',
      },
    })

    expect(wrapper.text()).toContain('Click me')
  })

  it('emits click event', async () => {
    const wrapper = mount(Button)

    await wrapper.trigger('click')

    expect(wrapper.emitted('click')).toBeTruthy()
  })

  it('shows loading state', () => {
    const wrapper = mount(Button, {
      props: {
        loading: true,
      },
    })

    expect(wrapper.find('svg').exists()).toBe(true)
  })

  it('disables button when disabled prop is true', () => {
    const wrapper = mount(Button, {
      props: {
        disabled: true,
      },
    })

    expect(wrapper.attributes('disabled')).toBeDefined()
  })
})
```

## Best Practices

### 1. Use Composition API

```vue
<script setup lang="ts">
// ✅ Good: Composition API
import { ref, computed } from 'vue'

const count = ref(0)
const doubled = computed(() => count.value * 2)
</script>
```

### 2. Type Everything

```typescript
// ✅ Good: Full TypeScript
interface Props {
  product: Product
  showActions?: boolean
}

const props = defineProps<Props>()
```

### 3. Extract Logic to Composables

```typescript
// ✅ Good: Reusable logic
const { data, loading, error, fetchProducts } = useProducts()
```

### 4. Use Slots for Flexibility

```vue
<Modal>
  <template #title>Custom Title</template>
  <template #default>Content</template>
  <template #footer>
    <Button>Close</Button>
  </template>
</Modal>
```

### 5. Keep Components Small

Components should do one thing well. Extract sub-components when needed.

## Resources

- [Vue 3 Documentation](https://vuejs.org/)
- [Inertia.js Guide](https://inertiajs.com/)
- [Pinia Documentation](https://pinia.vuejs.org/)
- [Headless UI](https://headlessui.com/)
- [Heroicons](https://heroicons.com/)

## Next Steps

- **[Addon Development →](/developers/addon-development)** - Create full-featured addons
